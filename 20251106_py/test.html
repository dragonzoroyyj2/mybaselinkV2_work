<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ì£¼ì‹ ë°°ì¹˜ ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ</title><script src="https://www.google.com/search?q=https://cdn.tailwindcss.com"></script><style>@import url('https://www.google.com/search?q=https://fonts.googleapis.com/css2%3Ffamily%3DInter:wght%40400%3B600%3B700%26display%3Dswap');body {font-family: 'Inter', sans-serif;background-color: #f3f4f6; /* ë°ì€ íšŒìƒ‰ ë°°ê²½ /color: #1f2937; / ì–´ë‘ìš´ í…ìŠ¤íŠ¸ /padding: 20px;}.container {max-width: 1200px;margin: auto;}.stock-card {background-color: white;border: 1px solid #e5e7eb;transition: all 0.2s;box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);}.stock-card:hover {box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);transform: translateY(-2px);}.status-badge {padding: 2px 8px;border-radius: 9999px;font-size: 0.75rem;font-weight: 600;}.bg-running { background-color: #d1fae5; color: #065f46; } / Tailwind green-100/green-800 /.bg-idle { background-color: #fee2e2; color: #991b1b; } / Tailwind red-100/red-800 /.bg-success { background-color: #dbeafe; color: #1e40af; } / Tailwind blue-100/blue-800 /.log-console {background-color: #1f2937; / Dark background for console /color: #d1fae5; / Light green text /height: 300px;overflow-y: scroll;font-family: monospace;font-size: 0.85rem;padding: 10px;border-radius: 8px;box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.6);}.log-line {line-height: 1.4;}.progress-bar {height: 8px;background-color: #e5e7eb;border-radius: 4px;overflow: hidden;}.progress-fill {height: 100%;background-color: #10b981; / Tailwind emerald-500 */transition: width 0.4s ease-in-out;}</style></head><body><div class="container"><header class="mb-8"><h1 class="text-3xl font-bold text-gray-800">ì£¼ì‹ ë°°ì¹˜ ì‘ì—… ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h1><p class="text-gray-500 mt-1">ì„œë²„ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ì†¡ë˜ëŠ” ì£¼ì‹ ë°°ì¹˜ ì‘ì—… ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p></header><!-- Control Panel -->
<div class="flex space-x-4 mb-8">
    <button id="startBatchBtn" class="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition duration-150">
        â–¶ï¸ ë°°ì¹˜ ì‘ì—… ì‹œì‘ (Simulated)
    </button>
    <button id="stopBatchBtn" class="px-6 py-2 bg-red-500 text-white font-semibold rounded-lg shadow-md hover:bg-red-600 transition duration-150" disabled>
        â¹ï¸ ë°°ì¹˜ ì‘ì—… ì¤‘ì§€
    </button>
    <button id="clearLogBtn" class="px-6 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow-md hover:bg-gray-400 transition duration-150">
        ğŸ—‘ï¸ ë¡œê·¸ ì§€ìš°ê¸°
    </button>
</div>

<!-- Stock Cards Grid -->
<div id="stockGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <!-- Stock Cards will be injected here -->
</div>

<!-- Log Console -->
<h2 class="text-xl font-semibold text-gray-700 mb-3">ì‹¤ì‹œê°„ ë¡œê·¸ ì½˜ì†”</h2>
<div id="logConsole" class="log-console">
    <div class="log-line text-gray-400">ì‹œìŠ¤í…œ: ì´ˆê¸°í™” ì™„ë£Œ. ë°°ì¹˜ ì‘ì—… ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
</div>
</div><script>// --- Configuration ---// ê°€ì§œ SSEë¥¼ ìœ„í•œ ë°ì´í„°ì™€ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤.const STOCK_SYMBOLS = ['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA', 'NVDA'];const BATCH_DATA = STOCK_SYMBOLS.map(symbol => ({symbol: symbol,status: 'IDLE', // IDLE, RUNNING, SUCCESS, FAILEDprogress: 0,lastUpdate: 'N/A'}));let isBatchRunning = false;
let sseIntervalId = null;
const logConsole = document.getElementById(&#39;logConsole&#39;);

// --- Utility Functions ---

/** ë¡œê·¸ë¥¼ ì½˜ì†”ì— ì¶”ê°€í•˜ê³  ìŠ¤í¬ë¡¤ì„ ë§¨ ì•„ë˜ë¡œ ì´ë™í•©ë‹ˆë‹¤. */
function addLog(message, type = &#39;INFO&#39;) {
    const now = new Date().toLocaleTimeString(&#39;ko-KR&#39;);
    const color = type === &#39;ERROR&#39; ? &#39;text-red-400&#39; : type === &#39;SUCCESS&#39; ? &#39;text-blue-400&#39; : &#39;text-gray-200&#39;;
    const logEntry = document.createElement(&#39;div&#39;);
    logEntry.className = `log-line ${color}`;
    logEntry.innerHTML = `[${now}] &lt;span class=&quot;font-bold&quot;&gt;${type}&lt;/span&gt;: ${message}`;
    logConsole.appendChild(logEntry);
    logConsole.scrollTop = logConsole.scrollHeight;
}

/** ì£¼ì‹ ì¹´ë“œ UIë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. */
function updateStockCard(data) {
    const cardElement = document.getElementById(`card-${data.symbol}`);
    if (!cardElement) return;

    // ìƒíƒœ ë°°ì§€ ì—…ë°ì´íŠ¸
    const statusBadge = cardElement.querySelector(&#39;.status-badge&#39;);
    statusBadge.textContent = data.status;
    statusBadge.className = `status-badge ${data.status === &#39;RUNNING&#39; ? &#39;bg-running&#39; : data.status === &#39;IDLE&#39; ? &#39;bg-idle&#39; : &#39;bg-success&#39;}`;

    // ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸
    const progressFill = cardElement.querySelector(&#39;.progress-fill&#39;);
    progressFill.style.width = `${data.progress}%`;

    // ì§„í–‰ë¥  í…ìŠ¤íŠ¸ ë° ìµœì¢… ì—…ë°ì´íŠ¸ ì‹œê°„ ì—…ë°ì´íŠ¸
    cardElement.querySelector(&#39;.progress-text&#39;).textContent = `${data.progress}% ì™„ë£Œ`;
    cardElement.querySelector(&#39;.last-update&#39;).textContent = data.lastUpdate;
}

/** ì´ˆê¸° ì£¼ì‹ ì¹´ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤. */
function initializeStockGrid() {
    const stockGrid = document.getElementById(&#39;stockGrid&#39;);
    stockGrid.innerHTML = BATCH_DATA.map(item =&gt; `
        &lt;div id=&quot;card-${item.symbol}&quot; class=&quot;stock-card p-6 rounded-xl&quot;&gt;
            &lt;div class=&quot;flex justify-between items-start mb-4&quot;&gt;
                &lt;h3 class=&quot;text-2xl font-bold&quot;&gt;${item.symbol}&lt;/h3&gt;
                &lt;span class=&quot;status-badge bg-idle&quot; style=&quot;min-width: 60px; text-align: center;&quot;&gt;${item.status}&lt;/span&gt;
            &lt;/div&gt;
            &lt;div class=&quot;mb-4&quot;&gt;
                &lt;div class=&quot;progress-bar&quot;&gt;
                    &lt;div class=&quot;progress-fill&quot; style=&quot;width: ${item.progress}%;&quot;&gt;&lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class=&quot;flex justify-between text-sm text-gray-500&quot;&gt;
                &lt;span class=&quot;progress-text&quot;&gt;${item.progress}% ì™„ë£Œ&lt;/span&gt;
                &lt;span&gt;ìµœì¢… ì—…ë°ì´íŠ¸: &lt;span class=&quot;last-update&quot;&gt;${item.lastUpdate}&lt;/span&gt;&lt;/span&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    `).join(&#39;&#39;);

    BATCH_DATA.forEach(updateStockCard); // ì´ˆê¸° ìƒíƒœ ì ìš©
}

// --- SSE Simulation Logic ---

/** SSE ì´ë²¤íŠ¸ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ê³  UIë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. */
function simulateSSEvent() {
    if (!isBatchRunning) return;

    let allFinished = true;

    BATCH_DATA.forEach(item =&gt; {
        if (item.status === &#39;RUNNING&#39;) {
            allFinished = false;

            // 1. ì§„í–‰ë¥  ì¦ê°€
            const increment = Math.floor(Math.random() * 20) + 1; // 1% ~ 20% ì¦ê°€
            item.progress = Math.min(100, item.progress + increment);
            item.lastUpdate = new Date().toLocaleTimeString(&#39;ko-KR&#39;);

            // 2. 100% ì™„ë£Œ ì‹œ ìƒíƒœ ë³€ê²½
            if (item.progress &gt;= 100) {
                item.status = &#39;SUCCESS&#39;;
                item.progress = 100;
                addLog(`[${item.symbol}] ë°°ì¹˜ ì‘ì—… ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œ.`, &#39;SUCCESS&#39;);
            } else {
                addLog(`[${item.symbol}] ë°ì´í„° ì²˜ë¦¬ ì¤‘... (ì§„í–‰ë¥ : ${item.progress}%)`);
            }

            // 3. UI ì—…ë°ì´íŠ¸
            updateStockCard(item);
        }
    });

    // ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸
    if (allFinished) {
        // ëª¨ë“  í•­ëª©ì´ IDLEì´ê±°ë‚˜ SUCCESSì¸ ê²½ìš°
        const isAllComplete = BATCH_DATA.every(item =&gt; item.status !== &#39;RUNNING&#39;);
        if (isAllComplete) {
            stopBatch(); // ì‘ì—… ì¤‘ë‹¨
            addLog(&#39;ëª¨ë“  ì£¼ì‹ ë°°ì¹˜ ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œë¥¼ í™•ì¸í•˜ì„¸ìš”.&#39;, &#39;SUCCESS&#39;);
        }
    }
}

/** ë°°ì¹˜ ì‘ì—… ì‹œì‘ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. */
function startBatch() {
    if (isBatchRunning) return;

    isBatchRunning = true;
    document.getElementById(&#39;startBatchBtn&#39;).disabled = true;
    document.getElementById(&#39;stopBatchBtn&#39;).disabled = false;

    // ë°ì´í„° ì´ˆê¸°í™” ë° RUNNING ìƒíƒœë¡œ ë³€ê²½
    BATCH_DATA.forEach(item =&gt; {
        item.status = &#39;RUNNING&#39;;
        item.progress = 0;
        item.lastUpdate = &#39;ì²˜ë¦¬ ì‹œì‘ë¨&#39;;
        updateStockCard(item);
    });

    addLog(&#39;--- ë°°ì¹˜ ì‘ì—… ì‹œì‘ ---&#39;, &#39;INFO&#39;);
    addLog(&#39;ì„œë²„ SSE ì—°ê²° ì‹œë„...&#39;);

    // 1ì´ˆë§ˆë‹¤ SSE ì´ë²¤íŠ¸ë¥¼ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.
    sseIntervalId = setInterval(simulateSSEvent, 1000);
}

/** ë°°ì¹˜ ì‘ì—… ì¤‘ì§€ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. */
function stopBatch() {
    isBatchRunning = false;
    document.getElementById(&#39;startBatchBtn&#39;).disabled = false;
    document.getElementById(&#39;stopBatchBtn&#39;).disabled = true;

    if (sseIntervalId) {
        clearInterval(sseIntervalId);
        sseIntervalId = null;
    }

    // í˜„ì¬ ì§„í–‰ ì¤‘ì´ë˜ í•­ëª©ì€ IDLEë¡œ ë³µê·€ì‹œí‚¤ì§€ ì•Šê³ , RUNNING ìƒíƒœë¡œ ìœ ì§€í•©ë‹ˆë‹¤.
    BATCH_DATA.forEach(item =&gt; {
        if (item.status === &#39;RUNNING&#39;) {
            item.status = &#39;IDLE&#39;; // ì¤‘ì§€ëœ í•­ëª©ì€ IDLEë¡œ ë³€ê²½
            item.lastUpdate = &#39;ì‘ì—… ì¤‘ì§€ë¨&#39;;
        }
        updateStockCard(item);
    });

    addLog(&#39;ë°°ì¹˜ ì‘ì—…ì´ ì‚¬ìš©ì ìš”ì²­ìœ¼ë¡œ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤.&#39;, &#39;ERROR&#39;);
}

/** ë¡œê·¸ ì½˜ì†”ì„ ì§€ì›ë‹ˆë‹¤. */
function clearLog() {
    logConsole.innerHTML = &#39;&#39;;
    addLog(&#39;ë¡œê·¸ ì½˜ì†”ì´ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.&#39;, &#39;INFO&#39;);
}

// --- Event Listeners and Initialization ---

document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {
    initializeStockGrid();

    document.getElementById(&#39;startBatchBtn&#39;).addEventListener(&#39;click&#39;, startBatch);
    document.getElementById(&#39;stopBatchBtn&#39;).addEventListener(&#39;click&#39;, stopBatch);
    document.getElementById(&#39;clearLogBtn&#39;).addEventListener(&#39;click&#39;, clearLog);
});
</script></body></html>